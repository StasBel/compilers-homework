# simple-compiler
## about

Implementing a simple language.
What do we have so far:

                                  | Interepreter | Stack Machine | x86 |
--------------------------------- | ------------ | ------------- | --- |
binops                            | [x]          | [x]           | [x] |
if/while/for/repeat control flows | [x]          | [x]           | [x] |
funcs                             | [x]          | [x]           | [x] |

## todo

- [ ] переписать !! and && в x86 для ускорения
- [ ] избавиться от второго аругмента в call на стадии fdefs (?)
- [ ] чистить стэк после вызова функции как процедуры в ST
- [x] HashMap вместо Map (нет, будут проседания при реаллокации)
- [ ] сделать рефакторинг
- [x] перепройти все тесты
- [ ] переделать функции в SM правильно? и с классами env
- [x] переделать функции в Int правильно? и с классами env
- [x] сохранять регистры после вызова функции
- [x] добавить регистры в рабочий стек по x86
- [ ] перейти на docker + vagrant, стоит написать нормальную команду в Vagrantfile (?)
- [ ] эффективная конкатенация строк и тесты в performance (они замеряют в x86)
- [ ] реализовать функции в PrettyPrinter.ml
